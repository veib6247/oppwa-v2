{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","src/ResultPage.vue","node_modules/@parcel/runtime-js/lib/runtime-cf24d9d00a477e9d.js","node_modules/@parcel/runtime-js/lib/runtime-a5fa21d797bc7d54.js","node_modules/@parcel/runtime-js/lib/runtime-dff223e394e656f8.js","node_modules/@parcel/runtime-js/lib/runtime-b7aec45d3b97d5d2.js","src/ResultPage.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","<script>\r\n// import reusable components\r\nimport FormButton from \"./components/FormButton.vue\";\r\nimport TextNotif from \"./components/TextNotif.vue\";\r\nimport FormDisplayResponse from \"./components/FormDisplayResponse.vue\";\r\n\r\n// import the result script\r\nconst fetchSessionPath = require(\"url:./../php/GetSessionData.php\");\r\nconst getTransactionResultPath = require(\"url:./../php/GetTransactionResults.php\");\r\nconst noiceImage = require(\"url:./assets/noice.png\");\r\n\r\nexport default {\r\n  components: { FormButton, TextNotif, FormDisplayResponse },\r\n  data() {\r\n    return {\r\n      msg: \"Data Received\",\r\n      checkoutID: \"\",\r\n      resourcePath: \"\",\r\n      sessionData: \"\",\r\n      error: \"\",\r\n      response: \"\",\r\n      noiceImagePath: \"\",\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    redirectToHome() {\r\n      // get current URL\r\n      const currentURL = new URL(window.location.href).toString();\r\n      // removes the last part of the URL to then redirects back to the homepage\r\n      window.location.replace(currentURL.split(\"/\").slice(0, -1).join(\"/\"));\r\n    },\r\n\r\n    // on page load, sets the passed ID and path\r\n    getURLParameters() {\r\n      const queryString = window.location.search;\r\n      if (queryString !== \"\") {\r\n        console.info(\"Search query:\", queryString);\r\n      }\r\n\r\n      const urlParams = new URLSearchParams(queryString);\r\n\r\n      if (urlParams.has(\"id\")) {\r\n        this.checkoutID = urlParams.get(\"id\");\r\n      }\r\n\r\n      if (urlParams.has(\"resourcePath\")) {\r\n        this.resourcePath = urlParams.get(\"resourcePath\");\r\n      }\r\n    },\r\n\r\n    /**\r\n     * call server back to get transaction results\r\n     */\r\n    async fetchSessionData() {\r\n      try {\r\n        const rawReponse = await fetch(fetchSessionPath, {\r\n          method: \"GET\",\r\n        });\r\n\r\n        // clone promise to parse to text later in case server does not respond with expected JSON format\r\n        const backupResponse = rawReponse.clone();\r\n\r\n        try {\r\n          // parse to json and save\r\n          this.sessionData = await rawReponse.json();\r\n          // get the results\r\n          this.fetchTransactionResult();\r\n        } catch (error) {\r\n          this.error = await backupResponse.text();\r\n          console.error(error, this.error);\r\n        }\r\n\r\n        // fetch error catching\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    },\r\n\r\n    async fetchTransactionResult() {\r\n      try {\r\n        const rawReponse = await fetch(getTransactionResultPath, {\r\n          method: \"POST\",\r\n          body: JSON.stringify({\r\n            authToken: this.sessionData.authToken,\r\n            url: `${this.returnSubdomain}.oppwa.com${this.resourcePath}`,\r\n            data: this.sessionData.parameters,\r\n          }),\r\n        });\r\n\r\n        this.response = await rawReponse.json();\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    returnSubdomain() {\r\n      return this.sessionData.endPoint.split(\".\")[0];\r\n    },\r\n  },\r\n\r\n  // autoruns\r\n  mounted() {\r\n    this.getURLParameters();\r\n    this.fetchSessionData();\r\n\r\n    this.noiceImagePath = noiceImage;\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <label for=\"\" class=\"label\">{{ msg }}</label>\r\n\r\n  <TextNotif color-type=\"is-danger\" v-if=\"!checkoutID\">\r\n    <code>checkoutID</code> was not detected! Please try the Reporting API\r\n    instead.\r\n  </TextNotif>\r\n\r\n  <TextNotif color-type=\"is-danger\" v-if=\"!resourcePath\">\r\n    <code>resourcePath</code> was not detected! Please try the Reporting API\r\n    instead.\r\n  </TextNotif>\r\n\r\n  <div class=\"table-container\" v-if=\"resourcePath && checkoutID\">\r\n    <table\r\n      class=\"\r\n        table\r\n        mono\r\n        is-bordered is-narrow is-hoverable is-fullwidth is-size-7\r\n      \"\r\n    >\r\n      <tbody>\r\n        <tr>\r\n          <th>ID</th>\r\n          <td>{{ checkoutID }}</td>\r\n        </tr>\r\n        <tr>\r\n          <th>Resource Path</th>\r\n          <td>{{ resourcePath }}</td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n\r\n  <Transition>\r\n    <div v-if=\"!response\">\r\n      <label class=\"label\">Fetching Transaction Results</label>\r\n      <progress class=\"progress is-small is-dark\" max=\"100\">15%</progress>\r\n      <br />\r\n    </div>\r\n  </Transition>\r\n\r\n  <Transition>\r\n    <FormDisplayResponse\r\n      label=\"JSON Response\"\r\n      :row-count=\"38\"\r\n      :data=\"response\"\r\n      v-if=\"response\"\r\n    />\r\n  </Transition>\r\n\r\n  <FormButton\r\n    button-icon=\"fas fa-redo\"\r\n    button-label=\"Go Back\"\r\n    :is-rounded=\"true\"\r\n    @submit-data=\"redirectToHome\"\r\n  />\r\n\r\n  <!-- noice -->\r\n  <nav class=\"level\">\r\n    <div class=\"level-item\">\r\n      <div v-if=\"response.amount === '69.00'\">\r\n        <div class=\"media\">\r\n          <div class=\"media-left\">\r\n            <figure class=\"image is-128x128\">\r\n              <img :src=\"noiceImagePath\" />\r\n            </figure>\r\n          </div>\r\n          <div class=\"media-content\">\r\n            <p class=\"title is-4\">noice</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </nav>\r\n</template>\r\n\r\n<style scoped>\r\n/* Generic transitions */\r\n.v-enter-active {\r\n  transition: opacity 0.5s ease;\r\n}\r\n.v-enter-from,\r\n.v-leave-to {\r\n  opacity: 0;\r\n}\r\n</style>","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"exGcT\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"b33ph\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"lmqJD\")).toString();","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"56Bs3\\\":\\\"ResultPage.2dd730cf.js\\\",\\\"exGcT\\\":\\\"GetSessionData.5b247252.php\\\",\\\"b33ph\\\":\\\"GetTransactionResults.c556e098.php\\\",\\\"lmqJD\\\":\\\"noice.8a289e6b.png\\\",\\\"aKjfn\\\":\\\"ResultPage.d4d45436.css\\\",\\\"fargx\\\":\\\"index.bb022888.js\\\"}\"));","import 'bulma'\r\nimport 'bulma-switch'\r\nimport { createApp } from 'vue'\r\n\r\n// import the root component App from a single-file component.\r\nimport ResultPage from './ResultPage.vue'\r\n\r\n// create app and mount\r\nconst app = createApp(ResultPage)\r\napp.mount('#app')\r\n"],"names":["$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$kfUNj","parcelRequire","$b939d216fd76a944$export$2e2bcd8739ae039","components","default","$5sq9f","$4YAqm","data","msg","checkoutID","resourcePath","sessionData","error","response","noiceImagePath","methods","redirectToHome","currentURL","URL","window","location","href","toString","replace","split","slice","join","getURLParameters","queryString","search","console","info","urlParams","URLSearchParams","has","this","get","rawReponse","fetch","$3AbEa","method","backupResponse","clone","json","fetchTransactionResult","text","$foXPg","JSON","stringify","authToken","url","returnSubdomain","parameters","endPoint","fetchSessionData","$53s3c","module","exports","resolve","import","meta","for","class","$e585200021d70dd1$var$_hoisted_2","$e585200021d70dd1$var$_withScopeId","$ecd4d","createElementVNode","$e585200021d70dd1$var$_hoisted_3","createTextVNode","$e585200021d70dd1$var$_hoisted_4","$e585200021d70dd1$var$_hoisted_5","$e585200021d70dd1$var$_hoisted_7","$e585200021d70dd1$var$_hoisted_8","$e585200021d70dd1$var$_hoisted_9","max","$e585200021d70dd1$var$_hoisted_15","$e585200021d70dd1$var$_hoisted_16","$e585200021d70dd1$var$_hoisted_18","$e585200021d70dd1$var$_hoisted_19","$e585200021d70dd1$var$_hoisted_20","$e585200021d70dd1$var$_hoisted_22","$e585200021d70dd1$var$_hoisted_1","toDisplayString","_ctx","openBlock","createBlock","_component_TextNotif","withCtx","createElementBlock","$e585200021d70dd1$var$_hoisted_6","createVNode","Transition","$e585200021d70dd1$var$_hoisted_10","$e585200021d70dd1$var$_hoisted_14","_component_FormDisplayResponse","label","_component_FormButton","onSubmitData","amount","$e585200021d70dd1$var$_hoisted_17","src","$e585200021d70dd1$var$_hoisted_21","$95e069d96074ae4b$export$2e2bcd8739ae039","script","register","parse","$a14a01f4581be451$var$script","__esModule","render","__cssModules","__scopeId","__file","$a14a01f4581be451$export$2e2bcd8739ae039","createApp","mount"],"version":3,"file":"ResultPage.2dd730cf.js.map"}